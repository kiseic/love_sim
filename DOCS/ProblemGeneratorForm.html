<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>オリジナルモード - プロフィール設定</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Noto Sans JP', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, 
                rgba(255, 105, 135, 0.7) 0%,   /* 濃いピンク */
                rgba(255, 165, 100, 0.7) 16%,  /* 濃いオレンジ */
                rgba(255, 220, 100, 0.7) 32%,  /* 濃い黄色 */
                rgba(100, 255, 150, 0.7) 48%,  /* 濃い緑 */
                rgba(100, 180, 255, 0.7) 64%,  /* 濃い青 */
                rgba(180, 100, 255, 0.7) 80%,  /* 濃い紫 */
                rgba(255, 105, 135, 0.7) 100%  /* 濃いピンク */
            );
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .input-focus:focus {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        .avatar-placeholder {
            background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        @keyframes scale-in {
            from {
                transform: scale(0.95);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- ヘッダー -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-white mb-2">💖 プロフィール設定</h1>
            <p class="text-white/80 text-lg">あなたと相手の情報を入力してください</p>
            <div class="mt-4 bg-white/20 rounded-full h-2 max-w-md mx-auto">
                <div id="progressBar" class="progress-bar bg-white rounded-full h-2 w-0"></div>
            </div>
        </div>

        <!-- プリセット選択 -->
        <div class="bg-white rounded-3xl card-shadow p-4 sm:p-6 mb-6">
            <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2 sm:mb-4 text-center">⚡ クイックスタート</h2>
            <p class="text-gray-600 text-center mb-4 sm:mb-6 text-sm sm:text-base">プリセットを選んで簡単に始めることもできます</p>
            
            <!-- モバイル用: 横スクロール -->
            <div class="block sm:hidden">
                <div class="flex gap-3 overflow-x-auto pb-2">
                    <!-- プリセット1: 大学生カップル -->
                    <div class="flex-shrink-0 w-48 border-2 border-gray-200 rounded-xl p-3 hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer" onclick="loadPreset('university')">
                        <div class="text-center mb-2">
                            <div class="text-2xl mb-1">🎓</div>
                            <h3 class="font-bold text-gray-800 text-sm">大学生カップル</h3>
                        </div>
                        <div class="text-xs text-gray-600 space-y-1">
                            <p>👤 20歳 大学生</p>
                            <p>💝 19歳 大学生</p>
                            <p>💕 友達 → 恋人</p>
                        </div>
                        <button type="button" class="w-full mt-2 px-3 py-1.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-xs">
                            選択
                        </button>
                    </div>

                    <!-- プリセット2: 社会人出会い -->
                    <div class="flex-shrink-0 w-48 border-2 border-gray-200 rounded-xl p-3 hover:border-pink-400 hover:bg-pink-50 transition-all cursor-pointer" onclick="loadPreset('workplace')">
                        <div class="text-center mb-2">
                            <div class="text-2xl mb-1">💼</div>
                            <h3 class="font-bold text-gray-800 text-sm">社会人出会い</h3>
                        </div>
                        <div class="text-xs text-gray-600 space-y-1">
                            <p>👤 27歳 会社員</p>
                            <p>💝 25歳 デザイナー</p>
                            <p>💕 初対面 → デート</p>
                        </div>
                        <button type="button" class="w-full mt-2 px-3 py-1.5 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors text-xs">
                            選択
                        </button>
                    </div>

                    <!-- プリセット3: 幼馴染み -->
                    <div class="flex-shrink-0 w-48 border-2 border-gray-200 rounded-xl p-3 hover:border-purple-400 hover:bg-purple-50 transition-all cursor-pointer" onclick="loadPreset('childhood')">
                        <div class="text-center mb-2">
                            <div class="text-2xl mb-1">🌸</div>
                            <h3 class="font-bold text-gray-800 text-sm">幼馴染み</h3>
                        </div>
                        <div class="text-xs text-gray-600 space-y-1">
                            <p>👤 22歳 大学生</p>
                            <p>💝 22歳 看護師</p>
                            <p>💕 親友 → 恋人</p>
                        </div>
                        <button type="button" class="w-full mt-2 px-3 py-1.5 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-xs">
                            選択
                        </button>
                    </div>

                    <!-- プリセット4: 職場恋愛 -->
                    <div class="flex-shrink-0 w-48 border-2 border-gray-200 rounded-xl p-3 hover:border-green-400 hover:bg-green-50 transition-all cursor-pointer" onclick="loadPreset('office')">
                        <div class="text-center mb-2">
                            <div class="text-2xl mb-1">🏢</div>
                            <h3 class="font-bold text-gray-800 text-sm">職場恋愛</h3>
                        </div>
                        <div class="text-xs text-gray-600 space-y-1">
                            <p>👤 28歳 営業</p>
                            <p>💝 26歳 事務</p>
                            <p>💕 同僚 → 恋人</p>
                        </div>
                        <button type="button" class="w-full mt-2 px-3 py-1.5 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-xs">
                            選択
                        </button>
                    </div>

                    <!-- プリセット5: 年上女性 -->
                    <div class="flex-shrink-0 w-48 border-2 border-gray-200 rounded-xl p-3 hover:border-red-400 hover:bg-red-50 transition-all cursor-pointer" onclick="loadPreset('older')">
                        <div class="text-center mb-2">
                            <div class="text-2xl mb-1">👩‍💼</div>
                            <h3 class="font-bold text-gray-800 text-sm">年上女性</h3>
                        </div>
                        <div class="text-xs text-gray-600 space-y-1">
                            <p>👤 24歳 新卒</p>
                            <p>💝 30歳 先輩</p>
                            <p>💕 憧れ → 恋愛</p>
                        </div>
                        <button type="button" class="w-full mt-2 px-3 py-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-xs">
                            選択
                        </button>
                    </div>

                    <!-- プリセット6: 趣味友達 -->
                    <div class="flex-shrink-0 w-48 border-2 border-gray-200 rounded-xl p-3 hover:border-yellow-400 hover:bg-yellow-50 transition-all cursor-pointer" onclick="loadPreset('hobby')">
                        <div class="text-center mb-2">
                            <div class="text-2xl mb-1">🎨</div>
                            <h3 class="font-bold text-gray-800 text-sm">趣味友達</h3>
                        </div>
                        <div class="text-xs text-gray-600 space-y-1">
                            <p>👤 25歳 会社員</p>
                            <p>💝 23歳 学生</p>
                            <p>💕 趣味仲間 → 恋人</p>
                        </div>
                        <button type="button" class="w-full mt-2 px-3 py-1.5 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors text-xs">
                            選択
                        </button>
                    </div>

                    <!-- プリセット7: 遠距離恋愛 -->
                    <div class="flex-shrink-0 w-48 border-2 border-gray-200 rounded-xl p-3 hover:border-indigo-400 hover:bg-indigo-50 transition-all cursor-pointer" onclick="loadPreset('longdistance')">
                        <div class="text-center mb-2">
                            <div class="text-2xl mb-1">✈️</div>
                            <h3 class="font-bold text-gray-800 text-sm">遠距離恋愛</h3>
                        </div>
                        <div class="text-xs text-gray-600 space-y-1">
                            <p>👤 26歳 エンジニア</p>
                            <p>💝 24歳 教師</p>
                            <p>💕 遠距離 → 結婚</p>
                        </div>
                        <button type="button" class="w-full mt-2 px-3 py-1.5 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors text-xs">
                            選択
                        </button>
                    </div>

                    <!-- プリセット8: 再会恋愛 -->
                    <div class="flex-shrink-0 w-48 border-2 border-gray-200 rounded-xl p-3 hover:border-teal-400 hover:bg-teal-50 transition-all cursor-pointer" onclick="loadPreset('reunion')">
                        <div class="text-center mb-2">
                            <div class="text-2xl mb-1">🔄</div>
                            <h3 class="font-bold text-gray-800 text-sm">再会恋愛</h3>
                        </div>
                        <div class="text-xs text-gray-600 space-y-1">
                            <p>👤 29歳 会社員</p>
                            <p>💝 28歳 元同級生</p>
                            <p>💕 再会 → 恋愛</p>
                        </div>
                        <button type="button" class="w-full mt-2 px-3 py-1.5 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors text-xs">
                            選択
                        </button>
                    </div>

                    <!-- プリセット9: 年下男性 -->
                    <div class="flex-shrink-0 w-48 border-2 border-gray-200 rounded-xl p-3 hover:border-orange-400 hover:bg-orange-50 transition-all cursor-pointer" onclick="loadPreset('younger')">
                        <div class="text-center mb-2">
                            <div class="text-2xl mb-1">👨‍🎓</div>
                            <h3 class="font-bold text-gray-800 text-sm">年下男性</h3>
                        </div>
                        <div class="text-xs text-gray-600 space-y-1">
                            <p>👤 32歳 女性管理職</p>
                            <p>💝 26歳 部下</p>
                            <p>💕 上司部下 → 恋人</p>
                        </div>
                        <button type="button" class="w-full mt-2 px-3 py-1.5 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-xs">
                            選択
                        </button>
                    </div>

                    <!-- プリセット10: 国際恋愛 -->
                    <div class="flex-shrink-0 w-48 border-2 border-gray-200 rounded-xl p-3 hover:border-cyan-400 hover:bg-cyan-50 transition-all cursor-pointer" onclick="loadPreset('international')">
                        <div class="text-center mb-2">
                            <div class="text-2xl mb-1">🌍</div>
                            <h3 class="font-bold text-gray-800 text-sm">国際恋愛</h3>
                        </div>
                        <div class="text-xs text-gray-600 space-y-1">
                            <p>👤 27歳 日本人</p>
                            <p>💝 25歳 外国人</p>
                            <p>💕 文化交流 → 恋愛</p>
                        </div>
                        <button type="button" class="w-full mt-2 px-3 py-1.5 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors text-xs">
                            選択
                        </button>
                    </div>
                </div>
                <div class="text-center mt-2">
                    <p class="text-xs text-gray-500">← 横にスワイプして選択 →</p>
                </div>
            </div>

            <!-- デスクトップ用: グリッド表示 -->
            <div class="hidden sm:grid md:grid-cols-3 lg:grid-cols-4 gap-4">
                <!-- プリセット1: 大学生カップル -->
                <div class="border-2 border-gray-200 rounded-xl p-4 hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer" onclick="loadPreset('university')">
                    <div class="text-center mb-3">
                        <div class="text-3xl mb-2">🎓</div>
                        <h3 class="font-bold text-gray-800">大学生カップル</h3>
                    </div>
                    <div class="text-sm text-gray-600 space-y-1">
                        <p>👤 20歳 大学生</p>
                        <p>💝 19歳 大学生</p>
                        <p>💕 友達 → 恋人</p>
                    </div>
                    <button type="button" class="w-full mt-3 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm">
                        選択
                    </button>
                </div>

                <!-- プリセット2: 社会人出会い -->
                <div class="border-2 border-gray-200 rounded-xl p-4 hover:border-pink-400 hover:bg-pink-50 transition-all cursor-pointer" onclick="loadPreset('workplace')">
                    <div class="text-center mb-3">
                        <div class="text-3xl mb-2">💼</div>
                        <h3 class="font-bold text-gray-800">社会人出会い</h3>
                    </div>
                    <div class="text-sm text-gray-600 space-y-1">
                        <p>👤 27歳 会社員</p>
                        <p>💝 25歳 デザイナー</p>
                        <p>💕 初対面 → デート</p>
                    </div>
                    <button type="button" class="w-full mt-3 px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors text-sm">
                        選択
                    </button>
                </div>

                <!-- プリセット3: 幼馴染み -->
                <div class="border-2 border-gray-200 rounded-xl p-4 hover:border-purple-400 hover:bg-purple-50 transition-all cursor-pointer" onclick="loadPreset('childhood')">
                    <div class="text-center mb-3">
                        <div class="text-3xl mb-2">🌸</div>
                        <h3 class="font-bold text-gray-800">幼馴染み</h3>
                    </div>
                    <div class="text-sm text-gray-600 space-y-1">
                        <p>👤 22歳 大学生</p>
                        <p>💝 22歳 看護師</p>
                        <p>💕 親友 → 恋人</p>
                    </div>
                    <button type="button" class="w-full mt-3 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm">
                        選択
                    </button>
                </div>

                <!-- プリセット4: 職場恋愛 -->
                <div class="border-2 border-gray-200 rounded-xl p-4 hover:border-green-400 hover:bg-green-50 transition-all cursor-pointer" onclick="loadPreset('office')">
                    <div class="text-center mb-3">
                        <div class="text-3xl mb-2">🏢</div>
                        <h3 class="font-bold text-gray-800">職場恋愛</h3>
                    </div>
                    <div class="text-sm text-gray-600 space-y-1">
                        <p>👤 28歳 営業</p>
                        <p>💝 26歳 事務</p>
                        <p>💕 同僚 → 恋人</p>
                    </div>
                    <button type="button" class="w-full mt-3 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm">
                        選択
                    </button>
                </div>

                <!-- プリセット5: 年上女性 -->
                <div class="border-2 border-gray-200 rounded-xl p-4 hover:border-red-400 hover:bg-red-50 transition-all cursor-pointer" onclick="loadPreset('older')">
                    <div class="text-center mb-3">
                        <div class="text-3xl mb-2">👩‍💼</div>
                        <h3 class="font-bold text-gray-800">年上女性</h3>
                    </div>
                    <div class="text-sm text-gray-600 space-y-1">
                        <p>👤 24歳 新卒</p>
                        <p>💝 30歳 先輩</p>
                        <p>💕 憧れ → 恋愛</p>
                    </div>
                    <button type="button" class="w-full mt-3 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm">
                        選択
                    </button>
                </div>

                <!-- プリセット6: 趣味友達 -->
                <div class="border-2 border-gray-200 rounded-xl p-4 hover:border-yellow-400 hover:bg-yellow-50 transition-all cursor-pointer" onclick="loadPreset('hobby')">
                    <div class="text-center mb-3">
                        <div class="text-3xl mb-2">🎨</div>
                        <h3 class="font-bold text-gray-800">趣味友達</h3>
                    </div>
                    <div class="text-sm text-gray-600 space-y-1">
                        <p>👤 25歳 会社員</p>
                        <p>💝 23歳 学生</p>
                        <p>💕 趣味仲間 → 恋人</p>
                    </div>
                    <button type="button" class="w-full mt-3 px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors text-sm">
                        選択
                    </button>
                </div>

                <!-- プリセット7: 遠距離恋愛 -->
                <div class="border-2 border-gray-200 rounded-xl p-4 hover:border-indigo-400 hover:bg-indigo-50 transition-all cursor-pointer" onclick="loadPreset('longdistance')">
                    <div class="text-center mb-3">
                        <div class="text-3xl mb-2">✈️</div>
                        <h3 class="font-bold text-gray-800">遠距離恋愛</h3>
                    </div>
                    <div class="text-sm text-gray-600 space-y-1">
                        <p>👤 26歳 エンジニア</p>
                        <p>💝 24歳 教師</p>
                        <p>💕 遠距離 → 結婚</p>
                    </div>
                    <button type="button" class="w-full mt-3 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors text-sm">
                        選択
                    </button>
                </div>

                <!-- プリセット8: 再会恋愛 -->
                <div class="border-2 border-gray-200 rounded-xl p-4 hover:border-teal-400 hover:bg-teal-50 transition-all cursor-pointer" onclick="loadPreset('reunion')">
                    <div class="text-center mb-3">
                        <div class="text-3xl mb-2">🔄</div>
                        <h3 class="font-bold text-gray-800">再会恋愛</h3>
                    </div>
                    <div class="text-sm text-gray-600 space-y-1">
                        <p>👤 29歳 会社員</p>
                        <p>💝 28歳 元同級生</p>
                        <p>💕 再会 → 恋愛</p>
                    </div>
                    <button type="button" class="w-full mt-3 px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors text-sm">
                        選択
                    </button>
                </div>

                <!-- プリセット9: 年下男性 -->
                <div class="border-2 border-gray-200 rounded-xl p-4 hover:border-orange-400 hover:bg-orange-50 transition-all cursor-pointer" onclick="loadPreset('younger')">
                    <div class="text-center mb-3">
                        <div class="text-3xl mb-2">👨‍🎓</div>
                        <h3 class="font-bold text-gray-800">年下男性</h3>
                    </div>
                    <div class="text-sm text-gray-600 space-y-1">
                        <p>👤 32歳 女性管理職</p>
                        <p>💝 26歳 部下</p>
                        <p>💕 上司部下 → 恋人</p>
                    </div>
                    <button type="button" class="w-full mt-3 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm">
                        選択
                    </button>
                </div>

                <!-- プリセット10: 国際恋愛 -->
                <div class="border-2 border-gray-200 rounded-xl p-4 hover:border-cyan-400 hover:bg-cyan-50 transition-all cursor-pointer" onclick="loadPreset('international')">
                    <div class="text-center mb-3">
                        <div class="text-3xl mb-2">🌍</div>
                        <h3 class="font-bold text-gray-800">国際恋愛</h3>
                    </div>
                    <div class="text-sm text-gray-600 space-y-1">
                        <p>👤 27歳 日本人</p>
                        <p>💝 25歳 外国人</p>
                        <p>💕 文化交流 → 恋愛</p>
                    </div>
                    <button type="button" class="w-full mt-3 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors text-sm">
                        選択
                    </button>
                </div>
            </div>
        </div>

        <!-- メインコンテンツ -->
        <div class="bg-white rounded-3xl card-shadow p-8">
            <form id="profileForm">
                <!-- 自分のプロフィール -->
                <div class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        <span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">1</span>
                        あなたのプロフィール
                    </h2>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- 画像アップロード -->
                        <div class="md:col-span-2 flex justify-center mb-6">
                            <div class="relative">
                                <div id="myAvatar" class="avatar-placeholder w-24 h-24 rounded-full flex items-center justify-center text-white text-3xl cursor-pointer hover:scale-105 transition-transform">
                                    👤
                                </div>
                                <input type="file" id="myImage" accept="image/*" class="hidden">
                                <button type="button" onclick="showPremiumInfo()" class="absolute -bottom-2 -right-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center hover:from-yellow-500 hover:to-orange-600 transition-all shadow-lg">
                                    💎
                                </button>
                                <div class="absolute -top-2 -right-2 bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full font-medium">
                                    Premium
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">年齢</label>
                            <input type="number" id="myAge" min="18" max="99" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent input-focus transition-all" placeholder="25">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">性別</label>
                            <select id="myGender" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent input-focus transition-all">
                                <option value="">選択してください</option>
                                <option value="男性">男性</option>
                                <option value="女性">女性</option>
                                <option value="その他">その他</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">職業</label>
                            <input type="text" id="myOccupation" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent input-focus transition-all" placeholder="会社員">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">性格・特徴</label>
                            <input type="text" id="myTraits" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent input-focus transition-all" placeholder="優しい、真面目">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">好みのタイプ</label>
                            <input type="text" id="myPreference" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent input-focus transition-all" placeholder="明るい人、話しやすい人">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">背景・趣味</label>
                            <input type="text" id="myBackground" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent input-focus transition-all" placeholder="読書、映画鑑賞">
                        </div>

                        <!-- 詳細記述欄 -->
                        <div class="md:col-span-2 mt-4">
                            <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200">
                                <div class="flex items-center justify-between mb-3">
                                    <label class="block text-sm font-medium text-gray-700">📝 詳細記述（より詳しい情報）</label>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">💎 プレミアム機能</span>
                                        <button type="button" onclick="showPremiumInfo()" class="text-blue-600 hover:text-blue-800 text-sm underline">詳細</button>
                                    </div>
                                </div>
                                <textarea id="myDetailedDescription" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent input-focus transition-all resize-none" placeholder="例：大学では心理学を専攻しており、人の心理に興味があります。アルバイトはカフェで接客をしているので、コミュニケーションは得意な方だと思います。休日は友達と映画を見に行ったり、一人で読書をしたりしてリラックスしています。将来は..." maxlength="500"></textarea>
                                <div class="flex justify-between items-center mt-2">
                                    <span class="text-xs text-gray-500">より詳細な情報でシミュレーションの精度が向上します</span>
                                    <span id="myDetailedCount" class="text-xs text-gray-400">0/500</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 相手のプロフィール -->
                <div class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        <span class="bg-pink-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">2</span>
                        相手のプロフィール
                    </h2>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- 画像アップロード -->
                        <div class="md:col-span-2 flex justify-center mb-6">
                            <div class="relative">
                                <div id="partnerAvatar" class="avatar-placeholder w-24 h-24 rounded-full flex items-center justify-center text-white text-3xl cursor-pointer hover:scale-105 transition-transform">
                                    💝
                                </div>
                                <input type="file" id="partnerImage" accept="image/*" class="hidden">
                                <button type="button" onclick="showPremiumInfo()" class="absolute -bottom-2 -right-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center hover:from-yellow-500 hover:to-orange-600 transition-all shadow-lg">
                                    💎
                                </button>
                                <div class="absolute -top-2 -right-2 bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full font-medium">
                                    Premium
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">年齢</label>
                            <input type="number" id="partnerAge" min="18" max="99" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent input-focus transition-all" placeholder="23">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">性別</label>
                            <select id="partnerGender" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent input-focus transition-all">
                                <option value="">選択してください</option>
                                <option value="男性">男性</option>
                                <option value="女性">女性</option>
                                <option value="その他">その他</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">職業</label>
                            <input type="text" id="partnerOccupation" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent input-focus transition-all" placeholder="デザイナー">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">性格・特徴</label>
                            <input type="text" id="partnerTraits" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent input-focus transition-all" placeholder="明るい、社交的">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">好みのタイプ</label>
                            <input type="text" id="partnerPreference" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent input-focus transition-all" placeholder="誠実な人、面白い人">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">背景・趣味</label>
                            <input type="text" id="partnerBackground" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent input-focus transition-all" placeholder="アート、カフェ巡り">
                        </div>

                        <!-- 詳細記述欄 -->
                        <div class="md:col-span-2 mt-4">
                            <div class="bg-gradient-to-r from-pink-50 to-purple-50 rounded-xl p-4 border border-pink-200">
                                <div class="flex items-center justify-between mb-3">
                                    <label class="block text-sm font-medium text-gray-700">📝 詳細記述（より詳しい情報）</label>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">💎 プレミアム機能</span>
                                        <button type="button" onclick="showPremiumInfo()" class="text-blue-600 hover:text-blue-800 text-sm underline">詳細</button>
                                    </div>
                                </div>
                                <textarea id="partnerDetailedDescription" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent input-focus transition-all resize-none" placeholder="例：美術大学でグラフィックデザインを学んでいます。作品作りに没頭することが多く、集中力があります。友達からは優しくて面倒見が良いと言われます。カフェでアルバイトをしており、お客様との会話を楽しんでいます。将来は..." maxlength="500"></textarea>
                                <div class="flex justify-between items-center mt-2">
                                    <span class="text-xs text-gray-500">より詳細な情報でシミュレーションの精度が向上します</span>
                                    <span id="partnerDetailedCount" class="text-xs text-gray-400">0/500</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 関係性設定 -->
                <div class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        <span class="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">3</span>
                        関係性設定
                    </h2>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">現在の関係</label>
                            <select id="relationship" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent input-focus transition-all">
                                <option value="">選択してください</option>
                                <option value="初対面">初対面</option>
                                <option value="知り合い">知り合い</option>
                                <option value="友達">友達</option>
                                <option value="親友">親友</option>
                                <option value="気になる人">気になる人</option>
                                <option value="恋人候補">恋人候補</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">関係の進展度</label>
                            <select id="stage" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent input-focus transition-all">
                                <option value="">選択してください</option>
                                <option value="出会ったばかり">🌱 出会ったばかり（まだお互いをよく知らない）</option>
                                <option value="会話を楽しむ">💬 会話を楽しむ（話すのが楽しくなってきた）</option>
                                <option value="お互いに興味">👀 お互いに興味（相手のことをもっと知りたい）</option>
                                <option value="特別な感情">💕 特別な感情（友達以上の気持ちが芽生えた）</option>
                                <option value="恋愛感情確信">💖 恋愛感情確信（この人が好きだと確信している）</option>
                                <option value="両思いの可能性">✨ 両思いの可能性（相手も自分を好きかもしれない）</option>
                            </select>
                            <p class="text-xs text-gray-500 mt-1">💡 現在の関係から、どこまで進展しているかを選択してください</p>
                        </div>
                    </div>
                </div>

                <!-- 粒度設定 -->
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        <span class="bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">4</span>
                        シミュレーション設定
                    </h2>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">目標</label>
                            <select id="goal" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent input-focus transition-all">
                                <option value="">選択してください</option>
                                <option value="友達になる">友達になる</option>
                                <option value="デートする">デートする</option>
                                <option value="告白する">告白する</option>
                                <option value="恋人になる">恋人になる</option>
                                <option value="関係を深める">関係を深める</option>
                                <option value="結婚を考える">結婚を考える</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">質問数</label>
                            <select id="numberOfQuestions" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent input-focus transition-all">
                                <option value="">選択してください</option>
                                <option value="5">5問（短時間）</option>
                                <option value="10">10問（標準）</option>
                                <option value="15">15問（詳細）</option>
                                <option value="20">20問（完全版）</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- ボタン -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button type="button" onclick="resetForm()" class="px-8 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-colors font-medium">
                        リセット
                    </button>
                    <button type="button" onclick="previewProfile()" class="px-8 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors font-medium">
                        プレビュー
                    </button>
                    <button type="button" onclick="startSimulation()" class="px-8 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all font-medium shadow-lg">
                        シミュレーション開始 🚀
                    </button>
                </div>
            </form>
        </div>

        <!-- プレビューモーダル -->
        <div id="previewModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50 p-4">
            <div class="bg-white rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800">プロフィール確認</h3>
                    <button onclick="closePreview()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
                </div>
                <div id="previewContent"></div>
                <div class="mt-6 text-center">
                    <button onclick="closePreview()" class="px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
                        閉じる
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // プログレスバー更新
        function updateProgress() {
            const inputs = document.querySelectorAll('input, select');
            let filled = 0;
            inputs.forEach(input => {
                if (input.value.trim() !== '') filled++;
            });
            const progress = (filled / inputs.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // 全入力フィールドにイベントリスナーを追加
        document.querySelectorAll('input, select').forEach(input => {
            input.addEventListener('input', function() {
                updateProgress();
                // 入力時に赤い枠線を削除（エラー状態をクリア）
                this.classList.remove('border-red-500', 'bg-red-50');
            });
            input.addEventListener('change', function() {
                updateProgress();
                // 選択時に赤い枠線を削除（エラー状態をクリア）
                this.classList.remove('border-red-500', 'bg-red-50');
            });
        });

        // 画像アップロード処理
        document.getElementById('myImage').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('myAvatar').style.backgroundImage = `url(${e.target.result})`;
                    document.getElementById('myAvatar').style.backgroundSize = 'cover';
                    document.getElementById('myAvatar').style.backgroundPosition = 'center';
                    document.getElementById('myAvatar').textContent = '';
                };
                reader.readAsDataURL(file);
            }
        });

        document.getElementById('partnerImage').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('partnerAvatar').style.backgroundImage = `url(${e.target.result})`;
                    document.getElementById('partnerAvatar').style.backgroundSize = 'cover';
                    document.getElementById('partnerAvatar').style.backgroundPosition = 'center';
                    document.getElementById('partnerAvatar').textContent = '';
                };
                reader.readAsDataURL(file);
            }
        });

        // フォームリセット
        function resetForm() {
            // フォームの全入力をリセット
            document.getElementById('profileForm').reset();
            
            // 全てのselect要素を明示的にリセット
            const selectElements = document.querySelectorAll('select');
            selectElements.forEach(select => {
                select.selectedIndex = 0; // 最初のオプション（空の選択肢）に設定
            });
            
            // 全てのinput要素を明示的にリセット
            const inputElements = document.querySelectorAll('input[type="text"], input[type="number"], textarea');
            inputElements.forEach(input => {
                input.value = '';
            });
            
            // アバター画像をリセット
            const myAvatar = document.getElementById('myAvatar');
            const partnerAvatar = document.getElementById('partnerAvatar');
            
            myAvatar.style.backgroundImage = '';
            myAvatar.style.backgroundSize = '';
            myAvatar.style.backgroundPosition = '';
            myAvatar.textContent = '👤';
            partnerAvatar.style.backgroundImage = '';
            partnerAvatar.style.backgroundSize = '';
            partnerAvatar.style.backgroundPosition = '';
            partnerAvatar.textContent = '💝';
            
            // テキストエリアの文字数カウンターをリセット
            document.getElementById('myDetailedCount').textContent = '0/500';
            document.getElementById('partnerDetailedCount').textContent = '0/500';
            
            // ファイル入力をリセット
            document.getElementById('myImage').value = '';
            document.getElementById('partnerImage').value = '';
            
            // エラー表示をクリア（赤い枠線など）
            const allInputs = document.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                input.classList.remove('border-red-500', 'bg-red-50');
            });
            
            // プログレスバーを更新
            updateProgress();
            
            // 最初の画面（プリセット選択）にスムーズにスクロール
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
            
            // 少し遅延してからメッセージを表示（スクロールが完了してから）
            setTimeout(() => {
                alert('✅ すべての入力内容をリセットしました！\n最初の画面に戻りました。');
            }, 500);
        }

        // プレビュー表示
        function previewProfile() {
            const data = {
                my: {
                    age: document.getElementById('myAge').value,
                    gender: document.getElementById('myGender').value,
                    occupation: document.getElementById('myOccupation').value,
                    traits: document.getElementById('myTraits').value,
                    preference: document.getElementById('myPreference').value,
                    background: document.getElementById('myBackground').value
                },
                partner: {
                    age: document.getElementById('partnerAge').value,
                    gender: document.getElementById('partnerGender').value,
                    occupation: document.getElementById('partnerOccupation').value,
                    traits: document.getElementById('partnerTraits').value,
                    preference: document.getElementById('partnerPreference').value,
                    background: document.getElementById('partnerBackground').value
                },
                relationship: document.getElementById('relationship').value,
                stage: document.getElementById('stage').value,
                goal: document.getElementById('goal').value,
                numberOfQuestions: document.getElementById('numberOfQuestions').value
            };

            const previewHTML = `
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-bold text-blue-800 mb-2">👤 あなた</h4>
                        <p><strong>年齢:</strong> ${data.my.age || '未設定'}歳</p>
                        <p><strong>性別:</strong> ${data.my.gender || '未設定'}</p>
                        <p><strong>職業:</strong> ${data.my.occupation || '未設定'}</p>
                        <p><strong>性格:</strong> ${data.my.traits || '未設定'}</p>
                        <p><strong>好み:</strong> ${data.my.preference || '未設定'}</p>
                        <p><strong>背景:</strong> ${data.my.background || '未設定'}</p>
                    </div>
                    <div class="bg-pink-50 p-4 rounded-lg">
                        <h4 class="font-bold text-pink-800 mb-2">💝 相手</h4>
                        <p><strong>年齢:</strong> ${data.partner.age || '未設定'}歳</p>
                        <p><strong>性別:</strong> ${data.partner.gender || '未設定'}</p>
                        <p><strong>職業:</strong> ${data.partner.occupation || '未設定'}</p>
                        <p><strong>性格:</strong> ${data.partner.traits || '未設定'}</p>
                        <p><strong>好み:</strong> ${data.partner.preference || '未設定'}</p>
                        <p><strong>背景:</strong> ${data.partner.background || '未設定'}</p>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h4 class="font-bold text-purple-800 mb-2">💕 関係性</h4>
                        <p><strong>現在の関係:</strong> ${data.relationship || '未設定'}</p>
                        <p><strong>段階:</strong> ${data.stage || '未設定'}</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-bold text-green-800 mb-2">🎯 設定</h4>
                        <p><strong>目標:</strong> ${data.goal || '未設定'}</p>
                        <p><strong>質問数:</strong> ${data.numberOfQuestions || '未設定'}問</p>
                    </div>
                </div>
            `;

            document.getElementById('previewContent').innerHTML = previewHTML;
            document.getElementById('previewModal').classList.remove('hidden');
            document.getElementById('previewModal').classList.add('flex');
        }

        // プレビューを閉じる
        function closePreview() {
            document.getElementById('previewModal').classList.add('hidden');
            document.getElementById('previewModal').classList.remove('flex');
        }

        // 必須項目チェック関数
        function checkRequiredFields() {
            const requiredFields = [
                { id: 'myAge', name: 'あなたの年齢', element: document.getElementById('myAge') },
                { id: 'myGender', name: 'あなたの性別', element: document.getElementById('myGender') },
                { id: 'partnerAge', name: '相手の年齢', element: document.getElementById('partnerAge') },
                { id: 'partnerGender', name: '相手の性別', element: document.getElementById('partnerGender') },
                { id: 'relationship', name: '現在の関係', element: document.getElementById('relationship') },
                { id: 'goal', name: '目標', element: document.getElementById('goal') },
                { id: 'numberOfQuestions', name: '質問数', element: document.getElementById('numberOfQuestions') }
            ];

            const missing = [];
            const missingElements = [];

            // 全ての入力フィールドの赤い枠線をリセット
            document.querySelectorAll('input, select').forEach(input => {
                input.classList.remove('border-red-500', 'bg-red-50');
            });

            // 必須項目をチェック
            requiredFields.forEach(field => {
                if (!field.element.value.trim()) {
                    missing.push(field.name);
                    missingElements.push(field.element);
                    // 未入力の項目に赤い枠線を追加
                    field.element.classList.add('border-red-500', 'bg-red-50');
                }
            });

            return { missing, missingElements };
        }

        // シミュレーション開始処理
        function startSimulation() {
            const { missing, missingElements } = checkRequiredFields();

            // 必須項目が未入力の場合のみエラー表示
            if (missing.length > 0) {
                // エラーメッセージを表示
                alert(`❌ 以下の必須項目を入力してください：\n\n${missing.join('\n')}\n\n赤い枠で表示された項目を確認してください。`);
                
                // 最初の未入力項目にスクロール＆フォーカス
                if (missingElements.length > 0) {
                    missingElements[0].scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'center' 
                    });
                    setTimeout(() => {
                        missingElements[0].focus();
                    }, 500);
                }
                return;
            }

            // 必須項目が満たされていれば、他の項目が空欄でもダイアログを表示
            showConfirmationDialog();
        }

        // 確認ダイアログを表示する関数
        function showConfirmationDialog() {
            const profileData = {
                my: {
                    age: document.getElementById('myAge').value,
                    gender: document.getElementById('myGender').value,
                    occupation: document.getElementById('myOccupation').value || '未設定',
                    traits: document.getElementById('myTraits').value || '未設定',
                    preference: document.getElementById('myPreference').value || '未設定',
                    background: document.getElementById('myBackground').value || '未設定'
                },
                partner: {
                    age: document.getElementById('partnerAge').value,
                    gender: document.getElementById('partnerGender').value,
                    occupation: document.getElementById('partnerOccupation').value || '未設定',
                    traits: document.getElementById('partnerTraits').value || '未設定',
                    preference: document.getElementById('partnerPreference').value || '未設定',
                    background: document.getElementById('partnerBackground').value || '未設定'
                },
                relationship: document.getElementById('relationship').value,
                stage: document.getElementById('stage').value || '未設定',
                goal: document.getElementById('goal').value,
                numberOfQuestions: document.getElementById('numberOfQuestions').value
            };

            // カスタムダイアログを作成
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-3xl max-w-lg w-full p-6 transform scale-95 animate-[scale-in_0.3s_ease-out_forwards]">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-2">💕</div>
                        <h3 class="text-2xl font-bold text-gray-800">恋を始めますか？</h3>
                    </div>
                    <div class="space-y-3 mb-6 text-sm">
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <span class="font-semibold">👤 あなた:</span> ${profileData.my.age}歳 ${profileData.my.gender}
                        </div>
                        <div class="bg-pink-50 p-3 rounded-lg">
                            <span class="font-semibold">💝 相手:</span> ${profileData.partner.age}歳 ${profileData.partner.gender}
                        </div>
                        <div class="bg-purple-50 p-3 rounded-lg">
                            <span class="font-semibold">💕 関係:</span> ${profileData.relationship}
                        </div>
                        <div class="bg-green-50 p-3 rounded-lg">
                            <span class="font-semibold">🎯 目標:</span> ${profileData.goal}
                        </div>
                        <div class="bg-yellow-50 p-3 rounded-lg">
                            <span class="font-semibold">📝 質問数:</span> ${profileData.numberOfQuestions}問
                        </div>
                    </div>
                    <div class="text-center mb-6">
                        <p class="text-gray-600">✨ 素敵な恋の物語を始めましょう！</p>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="cancelSimulation(this)" class="flex-1 px-4 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-colors">
                            キャンセル
                        </button>
                        <button onclick="confirmSimulation(this)" class="flex-1 px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all">
                            恋を始める 💕
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // シミュレーションをキャンセル
        function cancelSimulation(button) {
            button.closest('.fixed').remove();
        }

        // シミュレーションを確定
        function confirmSimulation(button) {
            button.closest('.fixed').remove();
            
            // シミュレーション開始処理
            const startButton = document.querySelector('button[onclick="startSimulation()"]');
            if (startButton) {
                const originalText = startButton.innerHTML;
                startButton.innerHTML = '💕 恋を始めています...';
                startButton.disabled = true;
                startButton.classList.add('opacity-75', 'cursor-not-allowed');

                setTimeout(() => {
                    alert('🎉 恋愛シミュレーションが開始されました！\n\n✨ 素敵な恋の物語が始まります...\n💕 相手の心を掴む会話を楽しんでください！');
                    
                    // ボタンを元に戻す
                    startButton.innerHTML = originalText;
                    startButton.disabled = false;
                    startButton.classList.remove('opacity-75', 'cursor-not-allowed');
                }, 2000);
            }
        }

        // フォーム送信処理
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            startSimulation();
        });

        // プリセット読み込み機能
        function loadPreset(presetType) {
            const presets = {
                university: {
                    my: {
                        age: '20',
                        gender: '男性',
                        occupation: '大学生',
                        traits: '真面目、優しい',
                        preference: '明るい人、一緒にいて楽しい人',
                        background: 'サークル活動、読書'
                    },
                    partner: {
                        age: '19',
                        gender: '女性',
                        occupation: '大学生',
                        traits: '明るい、社交的',
                        preference: '誠実な人、面白い人',
                        background: 'アート、音楽鑑賞'
                    },
                    relationship: '友達',
                    stage: '好意を持つ',
                    goal: '告白する',
                    numberOfQuestions: '10'
                },
                workplace: {
                    my: {
                        age: '27',
                        gender: '男性',
                        occupation: '会社員',
                        traits: '責任感が強い、穏やか',
                        preference: 'クリエイティブな人、話しやすい人',
                        background: '映画鑑賞、料理'
                    },
                    partner: {
                        age: '25',
                        gender: '女性',
                        occupation: 'デザイナー',
                        traits: 'クリエイティブ、独立心がある',
                        preference: '理解のある人、サポートしてくれる人',
                        background: 'アート、カフェ巡り'
                    },
                    relationship: '初対面',
                    stage: '親しくなる',
                    goal: 'デートする',
                    numberOfQuestions: '15'
                },
                childhood: {
                    my: {
                        age: '22',
                        gender: '男性',
                        occupation: '大学生',
                        traits: '思いやりがある、内向的',
                        preference: '一緒に成長できる人、理解し合える人',
                        background: 'ゲーム、スポーツ観戦'
                    },
                    partner: {
                        age: '22',
                        gender: '女性',
                        occupation: '看護師',
                        traits: '優しい、しっかり者',
                        preference: '信頼できる人、長く付き合える人',
                        background: '読書、散歩'
                    },
                    relationship: '親友',
                    stage: '関係深化',
                    goal: '関係を深める',
                    numberOfQuestions: '20'
                },
                office: {
                    my: {
                        age: '28',
                        gender: '男性',
                        occupation: '営業',
                        traits: 'コミュニケーション能力が高い、積極的',
                        preference: '仕事に理解がある人、支え合える人',
                        background: 'ゴルフ、飲み会'
                    },
                    partner: {
                        age: '26',
                        gender: '女性',
                        occupation: '事務',
                        traits: '丁寧、気配りができる',
                        preference: '頼りがいのある人、優しい人',
                        background: 'ヨガ、料理'
                    },
                    relationship: '知り合い',
                    stage: '親しくなる',
                    goal: 'デートする',
                    numberOfQuestions: '10'
                },
                older: {
                    my: {
                        age: '24',
                        gender: '男性',
                        occupation: '新卒社員',
                        traits: '素直、向上心がある',
                        preference: '包容力のある人、教えてくれる人',
                        background: 'スポーツ、勉強'
                    },
                    partner: {
                        age: '30',
                        gender: '女性',
                        occupation: '主任',
                        traits: '落ち着いている、面倒見が良い',
                        preference: '一生懸命な人、成長する人',
                        background: 'ワイン、旅行'
                    },
                    relationship: '気になる人',
                    stage: '好意を持つ',
                    goal: '告白する',
                    numberOfQuestions: '15'
                },
                hobby: {
                    my: {
                        age: '25',
                        gender: '男性',
                        occupation: '会社員',
                        traits: 'クリエイティブ、情熱的',
                        preference: '同じ趣味を持つ人、感性が合う人',
                        background: '写真、アート鑑賞'
                    },
                    partner: {
                        age: '23',
                        gender: '女性',
                        occupation: '美大生',
                        traits: '感受性豊か、自由奔放',
                        preference: '理解してくれる人、刺激的な人',
                        background: '絵画、展示会巡り'
                    },
                    relationship: '友達',
                    stage: '親しくなる',
                    goal: '恋人になる',
                    numberOfQuestions: '10'
                },
                longdistance: {
                    my: {
                        age: '26',
                        gender: '男性',
                        occupation: 'エンジニア',
                        traits: '論理的、忍耐強い',
                        preference: '信頼できる人、将来を考えられる人',
                        background: 'プログラミング、読書'
                    },
                    partner: {
                        age: '24',
                        gender: '女性',
                        occupation: '教師',
                        traits: '優しい、責任感が強い',
                        preference: '誠実な人、家族を大切にする人',
                        background: '教育、子供との時間'
                    },
                    relationship: '恋人候補',
                    stage: '交際開始',
                    goal: '結婚を考える',
                    numberOfQuestions: '20'
                },
                reunion: {
                    my: {
                        age: '29',
                        gender: '男性',
                        occupation: '会社員',
                        traits: '懐かしがり、安定志向',
                        preference: '昔を知っている人、安心できる人',
                        background: '同窓会、地元の友達'
                    },
                    partner: {
                        age: '28',
                        gender: '女性',
                        occupation: '公務員',
                        traits: '変わらない魅力、成熟した',
                        preference: '昔から知っている人、信頼できる人',
                        background: '地元愛、安定した生活'
                    },
                    relationship: '知り合い',
                    stage: '出会い',
                    goal: 'デートする',
                    numberOfQuestions: '15'
                },
                younger: {
                    my: {
                        age: '32',
                        gender: '女性',
                        occupation: '管理職',
                        traits: 'リーダーシップがある、自立している',
                        preference: '素直な人、成長意欲のある人',
                        background: 'キャリア、自己投資'
                    },
                    partner: {
                        age: '26',
                        gender: '男性',
                        occupation: '部下',
                        traits: '素直、エネルギッシュ',
                        preference: '頼りがいのある人、導いてくれる人',
                        background: 'スポーツ、新しいことへの挑戦'
                    },
                    relationship: '知り合い',
                    stage: '親しくなる',
                    goal: '関係を深める',
                    numberOfQuestions: '15'
                },
                international: {
                    my: {
                        age: '27',
                        gender: '男性',
                        occupation: '商社マン',
                        traits: '国際的、適応力がある',
                        preference: '文化の違いを楽しめる人、オープンな人',
                        background: '海外経験、語学学習'
                    },
                    partner: {
                        age: '25',
                        gender: '女性',
                        occupation: '英語教師',
                        traits: '明るい、文化に興味がある',
                        preference: '国際的な人、新しい体験を共有できる人',
                        background: '異文化交流、旅行'
                    },
                    relationship: '初対面',
                    stage: '出会い',
                    goal: '友達になる',
                    numberOfQuestions: '10'
                }
            };

            const preset = presets[presetType];
            if (!preset) return;

            // フォームに値を設定
            document.getElementById('myAge').value = preset.my.age;
            document.getElementById('myGender').value = preset.my.gender;
            document.getElementById('myOccupation').value = preset.my.occupation;
            document.getElementById('myTraits').value = preset.my.traits;
            document.getElementById('myPreference').value = preset.my.preference;
            document.getElementById('myBackground').value = preset.my.background;

            document.getElementById('partnerAge').value = preset.partner.age;
            document.getElementById('partnerGender').value = preset.partner.gender;
            document.getElementById('partnerOccupation').value = preset.partner.occupation;
            document.getElementById('partnerTraits').value = preset.partner.traits;
            document.getElementById('partnerPreference').value = preset.partner.preference;
            document.getElementById('partnerBackground').value = preset.partner.background;

            document.getElementById('relationship').value = preset.relationship;
            document.getElementById('stage').value = preset.stage;
            document.getElementById('goal').value = preset.goal;
            document.getElementById('numberOfQuestions').value = preset.numberOfQuestions;

            // プログレスバーを更新
            updateProgress();

            // 成功メッセージ
            const presetNames = {
                university: '大学生カップル',
                workplace: '社会人出会い',
                childhood: '幼馴染み',
                office: '職場恋愛',
                older: '年上女性',
                hobby: '趣味友達',
                longdistance: '遠距離恋愛',
                reunion: '再会恋愛',
                younger: '年下男性',
                international: '国際恋愛'
            };
            
            alert(`✨ ${presetNames[presetType]}のプリセットを読み込みました！\n必要に応じて内容を調整してください。`);

            // フォーム部分にスクロール
            document.getElementById('profileForm').scrollIntoView({ behavior: 'smooth' });
        }

        // 文字数カウンター機能
        function setupCharacterCounters() {
            const myTextarea = document.getElementById('myDetailedDescription');
            const partnerTextarea = document.getElementById('partnerDetailedDescription');
            const myCounter = document.getElementById('myDetailedCount');
            const partnerCounter = document.getElementById('partnerDetailedCount');

            myTextarea.addEventListener('input', function() {
                const count = this.value.length;
                myCounter.textContent = `${count}/500`;
                if (count > 450) {
                    myCounter.classList.add('text-red-500');
                } else {
                    myCounter.classList.remove('text-red-500');
                }
            });

            partnerTextarea.addEventListener('input', function() {
                const count = this.value.length;
                partnerCounter.textContent = `${count}/500`;
                if (count > 450) {
                    partnerCounter.classList.add('text-red-500');
                } else {
                    partnerCounter.classList.remove('text-red-500');
                }
            });
        }

        // プレミアム機能の説明を表示
        function showPremiumInfo() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-3xl max-w-md w-full p-6">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-2">💎</div>
                        <h3 class="text-2xl font-bold text-gray-800">プレミアム機能</h3>
                    </div>
                    <div class="space-y-4 mb-6">
                        <div class="flex items-start space-x-3">
                            <div class="text-green-500 mt-1">✅</div>
                            <div>
                                <h4 class="font-semibold text-gray-800">写真アップロード機能</h4>
                                <p class="text-sm text-gray-600">あなたと相手の写真を設定してよりリアルに</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="text-green-500 mt-1">✅</div>
                            <div>
                                <h4 class="font-semibold text-gray-800">詳細記述機能</h4>
                                <p class="text-sm text-gray-600">500文字まで詳細な情報を入力可能</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="text-green-500 mt-1">✅</div>
                            <div>
                                <h4 class="font-semibold text-gray-800">高精度シミュレーション</h4>
                                <p class="text-sm text-gray-600">より詳細で現実的な会話が可能</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="text-green-500 mt-1">✅</div>
                            <div>
                                <h4 class="font-semibold text-gray-800">無制限利用</h4>
                                <p class="text-sm text-gray-600">回数制限なしで何度でも利用可能</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 mb-6">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-600 mb-1">月額 ¥980</div>
                            <div class="text-sm text-gray-600">初回7日間無料</div>
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="this.closest('.fixed').remove()" class="flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
                            後で
                        </button>
                        <button onclick="upgradeToPremium()" class="flex-1 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all">
                            アップグレード
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // プレミアムアップグレード処理
        function upgradeToPremium() {
            alert('🚀 プレミアム機能は開発中です！\n近日中にリリース予定です。');
            document.querySelector('.fixed').remove();
        }

        // 初期化
        setupCharacterCounters();
        updateProgress();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9768a602327edffd',t:'MTc1NjQzNDg1Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>